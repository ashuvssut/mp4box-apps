<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>MP4Box.js - JavaScript MP4 Reader/Fragmenter</title>
    <!-- Include basic JQuery and JQuery UI files -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <!-- jQuery UI
    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
    /> -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- mp4box -->
    <script
      type="text/javascript"
      src="https://unpkg.com/mp4box@0.5.2/dist/mp4box.all.js"
    ></script>
    <link rel="stylesheet" href="style.css" />
    <script src="downloader.js"></script>
    <script src="sample-urls.js"></script>
    <script src="movieInfoDisplay.js"></script>
    <script src="index.js"></script>
  </head>
  <body>
    <div>
      <div style="position: relative; width: 50%; height: 50%">
        <video
          id="v"
          autoplay
          controls
          poster="http://gpac.wp.mines-telecom.fr/files/2014/01/FondBig_1600x230.png"
        ></video>
        <div
          id="overlayTracks"
          style="position: absolute; top: 0px; width: 100%; height: 95%"
        ></div>
      </div>
      <div id="progressbar">
        <div id="progress-label" style="text-align: center"></div>
      </div>
      <div id="tabs">
        <div id="tabs-1">
          <h1>Player Controls</h1>
          <fieldset>
            <legend>Select or set URL:</legend>
            <select
              id="urlSelector"
              onchange="setUrl(this.value);"
              onfocus="this.selectedIndex = -1;"
            ></select>
            <label>URL:</label>
            <input
              id="url"
              type="text"
              oninput="document.getElementById('urlSelector').selectedIndex = -1; setUrl(this.value);"
            />
          </fieldset>

          <fieldset>
            <legend>Download/Playback Controls</legend>
            <button id="playButton" onclick="play()" disabled>Play</button>
            <button id="loadButton" onclick="load()" disabled>
              Load Media Info
            </button>
            <button
              id="initAllButton"
              onclick="initializeAllSourceBuffers()"
              disabled
            >
              Add and Initialize All Source Buffers
            </button>
            <button
              id="initButton"
              onclick="initializeSourceBuffers()"
              disabled
            >
              Initialize Source Buffers
            </button>
            <button id="startButton" onclick="start()" disabled>
              Load Media Data &amp; Play
            </button>
            <button id="stopButton" onclick="stop()" disabled>
              Stop Media Download
            </button>
            <button onclick="reset()">Reset</button><br />
            <label for="playback_rate_range">Playback Rate</label>
            <input
              id="playback_rate_range"
              name="playback_rate_range"
              type="range"
              min="1"
              max="20"
              step="1"
              value="1"
              oninput="setPlaybackRate(this.value);"
            />
            <output id="playback_rate_range_out" for="playback_rate_range"
              >1</output
            >
          </fieldset>
        </div>

        <div id="infoDiv">
          <h1>Media Info</h1>
        </div>

        <div id="html5MediaDiv">
          <h1>HTML5 MediaElement Track Info</h1>
        </div>

        <div id="tabs-2">
          <h1>Download Settings</h1>
          <div>
            <label for="chunk_size_range"
              >Download Rate: <span id="chunk_dl_rate">8000</span> kbps</label
            >
          </div>
          <div>
            <label for="chunk_size_range">Download Chunk Size (bytes)</label>
            <input
              id="chunk_size_range"
              name="chunk_size_range"
              type="range"
              min="0"
              max="10000000"
              step="1000"
              value="1000000"
              oninput="setDownloadChunkSize(value);"
            />
            <output id="chunk_size_range_out" for="chunk_size_range"
              >1000000</output
            >
          </div>
          <div id="dlTimeout">
            <label for="chunk_size_range"
              >Download Timeout (milliseconds)</label
            >
            <input
              id="chunk_speed_range"
              name="chunk_speed_range"
              type="range"
              min="0"
              max="10000"
              step="100"
              value="500"
              oninput="setDownloadTimeout(this.value);"
            />
            <output id="chunk_speed_range_out" for="chunk_speed_range"
              >500</output
            >
          </div>
          <div>
            <label for="dl_realtime">Real-time Download</label>
            <input
              id="dl_realtime"
              name="dl_realtime"
              type="checkbox"
              onchange="toggleDownloadMode(event);"
            />
          </div>
        </div>

        <div id="tabs-3">
          <h1>Segmentation/Extraction Settings</h1>
          <label for="segment_size_range"
            >Number of Media Samples per Segment for MSE appendBuffer</label
          >
          <input
            id="segment_size_range"
            name="segment_size_range"
            type="range"
            min="1"
            max="5000"
            step="1"
            value="1000"
            oninput="setSegmentSize(this.value);"
          />
          <output id="segment_size_range_out" for="segment_size_range"
            >1000</output
          >
          <br />
          <label for="extraction_size_range"
            >Number of TextTrack Samples per Extraction Callback</label
          >
          <input
            id="extraction_size_range"
            name="extraction_size_range"
            type="range"
            min="1"
            max="100"
            step="1"
            value="1"
            oninput="setExtractionSize(this.value);"
          />
          <output id="extraction_size_range_out" for="extraction_size_range"
            >1</output
          >
        </div>

        <div id="tabs-4">
          <h1>Debug Settings</h1>
          <div>
            <label>Set Log Level:</label>
            <select
              id="logLevelSelect"
              onchange="Log.setLogLevel(Log[this.value]);"
              onfocus="this.selectedIndex = -1;"
            >
              <option value="error">Error</option>
              <option value="warn">Warning</option>
              <option value="info" selected>Info</option>
              <option value="debug">Debug (can be slow!)</option>
            </select>
          </div>
          <div>
            <label>Save Segments:</label>
            <input id="saveChecked" type="checkbox" />
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
